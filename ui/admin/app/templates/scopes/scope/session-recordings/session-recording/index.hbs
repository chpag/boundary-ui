<Rose::Layout::Page as |page|>
  <page.breadcrumbs>
    <BreadCrumbs />
  </page.breadcrumbs>

  <page.header>
    <h2>{{t 'resources.session-recording.session.title'}}</h2>
  </page.header>

  <page.body>
    <div class='channels-by-connection'>
      <Layout::Sidebar as |sb|>
        <sb.Body>
          {{#each
            @model.sessionRecording.connection_recordings
            as |connection|
          }}
            <div class='channels-by-connection-connection-header'>
              <p class='hds-typography-display-300 hds-font-weight-semibold'>
                {{t 'resources.session-recording.connection.title'}}
                {{connection.id}}
              </p>
            </div>
            <Hds::Table
              @model={{connection.channel_recordings}}
              @density='tall'
              @columns={{array
                (hash
                  label=(t
                    'resources.session-recording.connection.form.channel.label'
                  )
                )
                (hash
                  label=(t
                    'resources.session-recording.connection.form.type.label'
                  )
                )
                (hash
                  label=(t
                    'resources.session-recording.connection.form.summary.label'
                  )
                )
                (hash label='' align='right')
              }}
            >
              <:body as |B|>
                <B.Tr>
                  <B.Td>
                    <span>{{B.data.id}}</span>
                  </B.Td>
                  <B.Td>
                    <span>{{B.data.type}}</span>
                  </B.Td>
                  <B.Td>
                    <span><FlightIcon @name='arrow-up' /></span>
                    <span>{{B.data.bytes_up}}</span>
                    <span><FlightIcon @name='arrow-down' /></span>
                    <span>{{B.data.bytes_down}}</span>
                    <span
                      class='session-recording-list-cell-item hds-foreground-faint'
                    >
                      <span><FlightIcon @name='clock' /></span>
                      <span>
                        {{format-time-duration B.data.duration}}
                      </span>
                    </span>
                  </B.Td>
                  <B.Td align='right'>
                    <Hds::Button
                      @icon='play'
                      @color='secondary'
                      @text='Play'
                      @route='scopes.scope.session-recordings.session-recording.channels-by-connection.channel'
                      @model={{B.data.id}}
                    />
                  </B.Td>
                </B.Tr>
              </:body>
            </Hds::Table>
          {{/each}}
        </sb.Body>
        <sb.Sidebar>
          <div>
            <h3>{{t 'resources.session-recording.details'}}</h3>
            {{! Start time }}
            <p>
              <FlightIcon @name='calendar' />
              {{@model.sessionRecording.start_time}}
            </p>
            {{! Duration }}
            <p>
              <FlightIcon @name='clock' />
              {{@model.sessionRecording.duration}}
            </p>

            {{! Bytes up }}
            <p>
              <FlightIcon @name='arrow-up' />
              {{@model.sessionRecording.bytes_up}}
            </p>

            {{! Bytes down }}
            <p>
              <FlightIcon @name='arrow-down' />
              {{@model.sessionRecording.bytes_down}}
            </p>
          </div>
          {{! Related }}
          <div>
            <h3>{{t 'resources.session-recording.related'}}</h3>
            {{! User name }}
            <p>
              <FlightIcon @name='user' />
              {{@model.sessionRecording.user.name}}
            </p>
            {{! Target name }}
            <p>
              <FlightIcon @name='target' />
              {{@model.sessionRecording.target.name}}
            </p>
            {{! Bucket name }}
            <p>
              <FlightIcon @name='cloud-check' />
              {{or
                @model.storageBucket.name
                (t 'resources.storage-bucket.title')
              }}
            </p>
          </div>
        </sb.Sidebar>
      </Layout::Sidebar>
    </div>
  </page.body>
</Rose::Layout::Page>